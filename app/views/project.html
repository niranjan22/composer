<div class="container-fluid">
  <div ng-controller="ProjectCtrl">
    <form>
      <fieldset>
        <div class="row">
          <div class="col-md-12">
            <toaster-container toaster-options="{'position-class': 'toast-bottom-right'}"></toaster-container>
            <div class="tabs-container">
              <tabset>
                <tab>
                  <tab-heading>
                    Menus
                  </tab-heading>
                  <div class="panel-body">
                    <alert ng-repeat="alert in alerts" close="closeAlert($index)">{{alert.msg}}</alert>
                    <!-- menu starts here -->
                    <div class="col-md-3">
                      <script type="text/ng-template" id="menuContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Menu Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="menu-name">Menu Name</label>
                            <input ng-model="menu.menuname" type="text" class="form-control" id="menu-name" placeholder="" />
                          </div>
                          <div class="form-group">
                            <label for="menu-label">Menu Label</label>
                            <input ng-model="menu.menulabel" type="text" class="form-control" id="menu-label" placeholder="" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblMenu" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Menus
                                <a ng-click="searchMenu()"><span class="glyphicon glyphicon-search"></a>
                                <a ng-click="moveUpMenu(project.menus, selectedMenuIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownMenu(project.menus, selectedMenuIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                                                                            
                              </th>
                              <th>
                                <a ng-click="newmenu()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallmenus()"><span class="glyphicon glyphicon-trash"></a>
                                <!-- <div class="btn-group">
                                  <button type="button" class="btn btn-primary">Action</button>
                                  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                  </button>
                                  <ul class="dropdown-menu">
                                    <li><a ng-click="newmenu()">Add Menu</a></li>
                                    <li><a ng-click="searchMenu()">Search</a></li>
                                    <li><a ng-click="removeallmenus()">Remove All</a></li>
                                    <li><a ng-click="moveUpMenu()">Move Up</a></li>
                                    <li><a ng-click="moveDownMenu()">Move Down</a></li>
                                  </ul>
                                </div> -->
                              </th>
                            </tr>
                            <tr ng-show="searchMenuFlag">
                              <th colspan="3"><input class="form-control" ng-model="m.menuname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedMenuIndex}"
                                ng-click="selectMenu(menu, $index)"
                                ng-repeat="menu in project.menus | filter: m.menuname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ menu.menulabel }}</td>
                              <td>
                                <a ng-click="editmenu(menu, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removemenu($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- sub-menu starts here -->
                    <div class="col-md-9">
                      <script type="text/ng-template" id="submenuContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Sub-menu Details</h3>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                              <label for="main-menu-name">Main Menu Name</label>
                              <input ng-disabled="true" ng-model="submenu.mainmenuname" type="text" class="form-control" id="main-menu-name" placeholder="" />
                            </div>
                            <div class="form-group">
                              <label for="sub-menu-name">View Name</label>
                              <select id="sub-menu-view-name" class="form-control"
                                ng-model="submenu.modelname"
                                ng-required="true"
                                ng-options="view.modelname as view.viewname for view in views | filter:{viewtype:'list'}:true" >
                                <option value="">Not in list</option>
                              </select>
                            </div>
                            <div ng-hide="submenu.modelname" class="form-group">
                              <label for="sub-menu-name">Sub Menu Name</label>
                              <input ng-model="submenu.submenuname" type="text" class="form-control" id="sub-menu-name" placeholder="" />
                            </div>
                            <div ng-hide="submenu.modelname" class="form-group">
                              <label for="sub-menu-label">Sub Menu Label</label>
                              <input ng-model="submenu.submenulabel" type="text" class="form-control" id="sub-menu-label" placeholder="" />
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblSubMenu" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Sub Menus
                                <a ng-click="searchSubMenu()"><span class="glyphicon glyphicon-search"></a>
                                <a ng-click="moveUpSubmenu(selectedMenu.submenus, selectedSubMenuIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownSubmenu(selectedMenu.submenus, selectedSubMenuIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                              
                              </th>
                              <th>Sub Menu Label</th>
                              <th>
                                <a ng-click="newsubmenu()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallsubmenus()"><span class="glyphicon glyphicon-trash"></a>
                              </th>
                            </tr>
                            <tr ng-show="searchSubMenuFlag">
                              <th colspan="4"><input class="form-control" ng-model="sm.submenuname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedSubMenuIndex}"
                                ng-click="selectSubMenu(submenu, $index)"
                                ng-repeat="submenu in selectedMenu.submenus | filter: sm.submenuname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ submenu.submenuname }}{{ submenu.modelname }}</td>
                              <td>{{ submenu.submenulabel }}{{ submenu.modelname }}</td>
                              <td>
                                <a ng-click="editsubmenu(submenu, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removesubmenu($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </tab>
                <tab>
                  <tab-heading>
                    Models
                  </tab-heading>
                  <div class="panel-body">
                    <div class="col-md-5">
                      <script type="text/ng-template" id="modelContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Model Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <input ng-model="model.name" type="text" class="form-control"  id="model-name" placeholder="Contact" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <script type="text/ng-template" id="createController.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Create Controller</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <p> {{  model.name }} </p>
                          </div>
                          <div class="form-group">
                            <label for="method-type">Method</label>
                            <select multiple id="method-type" class="form-control" size='7'
                              ng-model="methods"
                              ng-required="true"
                              ng-options="template for template in templates" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <script type="text/ng-template" id="createViews.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Create Views</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <span>{{ model.name }}</span>
                          </div>
                          <div class="form-group">
                            <label for="view-type">Views</label>
                            <select multiple id="view-type" class="form-control" size='4'
                              ng-model="output.views"
                              ng-required="true"
                              ng-options="template for template in templates" />
                          </div>
                          <div ng-show="output.views.indexOf('list') > -1" class="form-group">
                            <label for="menu-name">Main Menu Name</label>
                            <select id="menu-name" class="form-control"
                              ng-model="output.menuname"
                              ng-required="true"
                              ng-options="menu.menuname as menu.menuname for menu in menus">
                              <option value="">No Menu</option>
                            </select>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblModel" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Models  
                                <a ng-click="searchModel()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpModel(project.models, selectedModelIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownModel(project.models, selectedModelIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                              </th>
                              <th>
                                <a ng-click="createallcontrollers()"><span class="badge">C</span></a>
                                <a ng-click="createallviews()"><span class="badge">V</span></a>
                                <a ng-click="newmodel()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallmodels()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchModelFlag">
                              <th colspan="3"><input class="form-control" ng-model="q.name" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedModelIndex}"
                                ng-click="selectModel(model, $index)"
                                ng-repeat="model in project.models | filter: q.name">
                              <td>{{ $index+1 }}</td>
                              <td>{{ model.name }}</td>
                              <td>
                                <a ng-click="createcontroller(model)"><span class="badge">C</span></a>
                                <a ng-click="createviews(model)"><span class="badge">V</span></a>
                                <a ng-click="editmodel(model, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removemodel($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="col-md-7">
                      <!-- Single button -->
                        <!--
                        <div class="btn-group">
                          <button type="button" class="btn btn-primary">Action</button>
                          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                          </button>
                          <ul class="dropdown-menu">
                            <li><a ng-click="newelement()">Add Element</a></li>
                            <li><a ng-click="removeelement()">Remove Element</a></li>
                            <li><a ng-click="removeallelements()">Remove all</a></li>
                          </ul>
                        </div> -->
                      <script type="text/ng-template" id="elementContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Element Details</h3>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                              <label for="element-name">Element Name</label>
                              <input ng-model="element.elementname" type="text" class="form-control" id="element-name" placeholder="Name" />
                            </div>
                            <div class="form-group">
                              <label for="element-type">Element Type</label>
                              <!-- <input ng-model="element.elementtype" type="text" class="form-control" id="element-type" placeholder="String" /> -->
                              <select class="form-control" ng-model="element.elementtype" id="element-type">
                                <option value="String">String</option>
                                <option value="Boolean">Boolean</option>
                                <option value="Date">Date</option>
                                <option value="Number">Number</option>
                                <option value="Schema.Types.ObjectId">Schema.Types.ObjectId</option>
                                <option value="Nested">Nested</option>
                                <option value="File">File</option>
                              </select>
                            </div>
                            <div ng-show="element.elementtype=='Schema.Types.ObjectId'" class="form-group">
                              <label for="element-schema-object-ref">Schema Object Ref</label>
                              <select class="form-control" id="element-schema-object-ref" 
                                      ng-model="element.schemaobjref"
                                      ng-change="fetchElementslist(element.schemaobjref)"
                                      ng-options= "model.name as model.name for model in models | filter:'!{{ modelname }}':true" >
                              </select>
                            </div>
                            <div ng-show="element.elementtype=='Schema.Types.ObjectId'" class="form-group">
                              <label for="populateelements">Populate Elements</label>
                              <select multiple class="form-control" id="populateelements" 
                                      ng-model="element.populateelements"
                                      ng-options= "selement as selement for selement in selements" >
                              </select>
                            </div>                            
                            <div ng-show="element.elementtype=='Nested' || element.elementtype=='File'" class="checkbox">
                              <label>
                                  <input type="checkbox" ng-model="element.isarray" >Is Array</input>
                              </label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table-responsive">
                        <table id="tblElement" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Elements
                                <a ng-click="searchElement()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpElement(selectedModel.elements, selectedElementIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownElement(selectedModel.elements, selectedElementIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                                <a ng-csv="exportElements()" filename="{{selectedModel.name}}.csv"><span class="glyphicon glyphicon-export"></span></a>
                              </th>
                              <th>Type</th>
                              <th>
                                <a ng-click="newelement()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallelements()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchElementFlag">
                              <th colspan="4"><input class="form-control" ng-model="e.elementname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedElementIndex}"
                                ng-click="selectElement(element, $index)"
                                ng-repeat="element in selectedModel.elements | filter: e.elementname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ element.elementname }}</td>
                              <td>{{ element.elementtype }}</td>
                              <td>
                                <a ng-click="editelement(element, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removeelement($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <script type="text/ng-template" id="nestedelementContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Nested Element Details</h3>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                              <label for="nested-element-name">Nested Element Name</label>
                              <input ng-model="nestedelement.elementname" type="text" class="form-control" id="nested-element-name" placeholder="Name" />
                            </div>
                            <div class="form-group">
                              <label for="nested-element-type">Element Type</label>
                              <!-- <input ng-model="element.elementtype" type="text" class="form-control" id="element-type" placeholder="String" /> -->
                              <select class="form-control" id="nested-element-type"
                                      ng-model="nestedelement.elementtype">
                                <option value="String">String</option>
                                <option value="Boolean">Boolean</option>
                                <option value="Date">Date</option>
                                <option value="Number">Number</option>
                                <option value="Schema.Types.ObjectId">Schema.Types.ObjectId</option>
                              </select>
                            </div>
                            <div ng-show="nestedelement.elementtype=='Schema.Types.ObjectId'" class="form-group">
                              <label for="nested-element-schema-object-ref">Schema Object Ref</label>
                              <select class="form-control" id="nested-element-schema-object-ref" 
                                      ng-model="nestedelement.schemaobjref"
                                      ng-change="fetchElementslist(nestedelement.schemaobjref)"
                                      ng-options= "model.name as model.name for model in models | filter:'!{{ modelname }}':true" />
                            </div>
                            <div ng-show="nestedelement.elementtype=='Schema.Types.ObjectId'" class="form-group">
                              <label for="nested-element-populateelements">Populate Elements</label>
                              <select multiple class="form-control" id="nested-element-populateelements" 
                                      ng-model="nestedelement.populateelements"
                                      ng-options= "selement as selement for selement in selements" >
                              </select>
                            </div>                             
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div ng-show="selectedElement.elementtype=='Nested'" class="table-responsive">
                        <table id="tblNestedElement" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Nested Elements
                                <a ng-click="searchNestedElement()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpNestedElement(selectedElement.elements, selectedNestedElementIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownNestedElement(selectedElement.elements, selectedNestedElementIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>
                              </th>
                              <th>Type</th>
                              <th>
                                <a ng-click="newnestedelement()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallnestedelements()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchNestedElementFlag">
                              <th colspan="4"><input class="form-control" ng-model="ne.elementname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedNestedElementIndex}"
                                ng-click="selectNestedElement(nestedelement, $index)"
                                ng-repeat="nestedelement in selectedElement.elements | filter: ne.elementname">
                              <td>{{ selectedElementIndex + 1 }}.{{ $index+1 }}</td>
                              <td>{{ nestedelement.elementname }}</td>
                              <td>{{ nestedelement.elementtype }}</td>
                              <td>
                                <a ng-click="editnestedelement(nestedelement, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removenestedelement($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                <!-- tab panel body div close-->
                </tab>
                <tab>
                  <tab-heading>
                    Controllers
                  </tab-heading>
                  <div class="panel-body">
                    <!-- controller starts here -->
                    <div class="col-md-4">
                      <!-- controller popup starts here -->
                      <script type="text/ng-template" id="controllerContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Controller Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="controller-name">Controller Name</label>
                            <input ng-model="controller.controllername" type="text" class="form-control" id="controller-name" placeholder="" />
                          </div>
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <select id="model-name" class="form-control"
                              ng-model="controller.modelname"
                              ng-change="fetchTemplateslist()" 
                              ng-required="true"
                              ng-options="model.name as model.name for model in models" />
                          </div>
                          <div ng-hide="templates.length===0" class="form-group">
                            <label for="method-type">Method Name</label>
                            <select multiple id="method-type" class="form-control" size='7'
                              ng-model="controller.methods"
                              ng-required="true"
                              ng-options="template for template in templates" />
                          </div>                          
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <!-- controller popup ends here -->
                      <!-- controller table starts here -->
                      <div class="table">
                        <table id="tblController" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Controllers
                                <a ng-click="searchController()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpController(project.controllers, selectedControllerIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownController(project.controllers, selectedControllerIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                              </th>
                              <th>
                                <a ng-click="newcontroller()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallcontrollers()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchControllerFlag">
                              <th colspan="3"><input class="form-control" ng-model="ct.controllername" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedControllerIndex}"
                                ng-click="selectController(controller, $index)"
                                ng-repeat="controller in project.controllers | filter: ct.controllername">
                              <td>{{ $index+1 }}</td>
                              <td>{{ controller.controllername }}</td>
                              <td>
                                <a ng-click="editcontroller(controller, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removecontroller($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!-- controller table ends here -->
                    </div>
                    <!-- method starts here -->
                    <div class="col-md-3">
                      <!-- method popup starts here -->
                      <script type="text/ng-template" id="methodContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Method Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-3">
                              <div class="form-group">
                                <label for="method-name">Methods</label>
                                <input ng-model="method.methodname" type="text" class="form-control" id="method-name" placeholder="" />
                              </div>
                            </div>
                            <div class="col-md-3">
                              <div class="form-group">
                                <label for="method-type">Method Type</label>
                                <select class="form-control" ng-model="method.methodtype" id="method-type">
                                  <option value="create">create</option>
                                  <option value="remove">remove</option>
                                  <option value="update">update</option>
                                  <option value="find">find</option>
                                  <option value="findOne">findOne</option>
                                  <option value="standAlone">standAlone</option>
                                  <option value="Modal">Modal</option>
                                </select>
                              </div>
                            </div>
                          </div>
                          <div ng-show="method.methodtype === 'Modal' || method.methodtype ==='standAlone'" class="row">
                            <div class="col-md-12">
                              <div class="form-group">
                                <label for="method-content">Method Content</label>
                                <textarea ng-model="method.methodcontent" class="form-control" rows="15" id="method-content" placeholder="" />
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <!-- method popup ends here -->
                      <!-- method table starts here -->
                      <div class="table">
                        <table id="tblMethod" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Methods<a ng-click="searchMethod()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th>
                                <a ng-click="newmethod()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallmethods()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchMethodFlag">
                              <th colspan="3"><input class="form-control" ng-model="md.methodname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedMethodIndex}"
                                ng-click="selectMethod(method, $index)"
                                ng-repeat="method in selectedController.methods | filter: md.methodname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ method.methodname }}</td>
                              <td>
                                <a ng-click="editmethod(method, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removemethod($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!-- method table ends here -->
                    </div>
                    <!-- method ends here -->
                    <!-- service starts -->
                    <div class="col-md-2">
                      <script type="text/ng-template" id="serviceContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Service Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="service-name">Service Name</label>
                            <select id="service-name" class="form-control"
                              ng-model="service.modelname"
                              ng-required="true"
                              ng-options="model.name as model.name for model in models | filter:{name:'!'+'{{modelname}}'}:true" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblService" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Services</th>
                              <th><a ng-click="newservice()"><span class="glyphicon glyphicon-plus"></span></a></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedServiceIndex}"
                                ng-click="selectService(service, $index)"
                                ng-repeat="service in selectedController.services track by $index">
                              <td>{{ $index+1 }}</td>
                              <td>{{ service }}</td>
                              <td><a ng-click="removeservice($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- service ends -->
                    <!-- lookup starts -->
                    <div class="col-md-3">
                      <script type="text/ng-template" id="lookupContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Lookup Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-3 form-group">
                              <label for="lookup-name">Lookup Name</label>
                              <input ng-model="lookup.lookupname" type="text" class="form-control" id="lookup-name" placeholder="" />
                            </div>
                            <div class="col-md-9 form-group">
                              <label for="lookup-expression">Expression</label>
                              <input ng-model="lookup.expression" type="text" class="form-control" id="lookup-expression" placeholder="" />
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblLookup" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Lookups
                                <a ng-click="searchLookup()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpLookup(selectedController.lookups, selectedLookupIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownLookup(selectedController.lookups, selectedLookupIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                              </th>
                              <th>
                                <a ng-click="newlookup()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removealllookups()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchLookupFlag">
                              <th colspan="3"><input class="form-control" ng-model="l.lookupname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedLookupIndex}"
                                ng-click="selectLookup(lookup, $index)"
                                ng-repeat="lookup in selectedController.lookups | filter: l.lookupname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ lookup.lookupname }}</td>
                              <td>
                                <a ng-click="editlookup(lookup, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removelookup($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- lookup ends -->
                  </div>
                  <!-- tab panel body div close-->
                </tab>
                <tab>
                  <tab-heading>
                    Views
                  </tab-heading>
                  <div class="panel-body">
                    <!-- view starts here -->
                    <div class="col-md-4">
                      <!-- view popup starts here -->
                      <script type="text/ng-template" id="viewContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">View Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="view-name">View Name</label>
                            <input ng-model="view.viewname" type="text" class="form-control" id="view-name" placeholder="" />
                          </div>
                          <div class="form-group">
                            <label for="view-type">View Type</label>
                            <select id="view-type" class="form-control"
                              ng-model="view.viewtype"
                              ng-required="true"
                              ng-options="template for template in templates" />
                          </div>
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <select id="model-name" class="form-control"
                              ng-model="view.modelname"
                              ng-required="true"
                              ng-options="model.name as model.name for model in models" />
                          </div>
                          <div ng-show="view.viewtype=='list'" class="form-group">
                            <label for="menu-name">Main Menu Name</label>
                            <select id="menu-name" class="form-control"
                              ng-model="view.menuname"
                              ng-required="true"
                              ng-options="menu.menuname as menu.menuname for menu in menus">
                              <option value="">No Menu</option>
                            </select>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <!-- view popup ends here -->
                      <!-- view table starts here -->
                      <div class="table">
                        <table id="tblView" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Views
                                <a ng-click="searchView()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpView(project.views, selectedViewIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownView(project.views, selectedViewIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                              </th>
                              <th>
                                <a ng-click="newview()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallviews()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchViewFlag">
                              <th colspan="3"><input class="form-control" ng-model="v.viewname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedViewIndex}"
                                ng-click="selectView(view, $index)"
                                ng-repeat="view in project.views | filter: v.viewname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ view.viewname }}</td>
                              <td>
                                <a ng-click="editview(view, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removeview($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- view ends here -->
                    <!-- Section starts -->
                    <div class="col-md-3">
                      <script type="text/ng-template" id="sectionContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Section Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="section-name">Controller Name</label>
                            <select id="section-name" class="form-control"
                              ng-model="section.controllername"
                              ng-required="true"
                              ng-options="controller.controllername as controller.controllername for controller in controllers" />
                          </div>
                          <div class="form-group">
                            <label for="section-size">Size</label>
                            <input ng-model="section.sectionsize" min="1" max="12" type="number" class="form-control" id="section-size" placeholder="12" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblSection" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Sections
                                <a ng-click="searchSection()"><span class="glyphicon glyphicon-search"></span></a>
                              </th>
                              <th>
                                <a ng-click="newsection()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallsections()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchSectionFlag">
                              <th colspan="3"><input class="form-control" ng-model="sec.sectionname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedSectionIndex}"
                                ng-click="selectSection(section, $index)"
                                ng-repeat="section in selectedView.sections | filter: sectionname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ section.controllername }}</td>
                              <td>
                                <a ng-click="editsection(section, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removesection($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- Section ends -->
                    <!-- Control starts -->
                    <div class="col-md-5">
                      <script type="text/ng-template" id="controlContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Control Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-2 form-group">
                              <label for="control-name">Control Name</label>
                              <input ng-model="control.controlname" type="text" class="form-control" id="control-name" placeholder="Name" />
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="control-type">Control Type</label>
                              <select class="form-control" ng-model="control.controltype">
                                <option value="Text">Text</option>
                                <option value="Number">Number</option>
                                <option value="Select">Select</option>
                                <option value="Date">Date</option>
                                <option value="Boolean">Boolean</option>
                                <option value="Nested">Nested</option>
                                <option value="File">File</option>
                              </select>
                            </div>
                            <div class="col-md-3 form-group">
                              <label for="control-label">Control Label</label>
                              <input ng-model="control.controllabel" type="text" class="form-control" id="control-label" placeholder="Display Name" />
                            </div>
                            <div ng-hide="control.controltype=='Nested' || control.controltype=='Select'" class="col-md-3 form-group">
                              <label for="example-text">Sample text</label>
                              <input ng-model="control.exampletext" type="text" class="form-control" id="example-text" placeholder="" />
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="control-width">Width</label>
                              <input ng-model="control.width" type="number" class="form-control" id="control-width" placeholder="2" />
                            </div>
                            <div ng-show="control.controltype=='Select'" class="col-md-3 form-group">
                              <label for="Model">Model</label>
                              <select class="form-control" id="Model"
                                      ng-model="control.modelname"
                                      ng-change="fetchElementslist(control.modelname)"
                                      ng-options= "model.name as model.name for model in models" >
                                </select>
                            </div>
                            <div ng-show="control.controltype=='Select'" class="col-md-3 form-group">
                              <label for="displayelement">Display Element</label>
                              <select class="form-control" id="displayelement"
                                      ng-model="control.displayelement"
                                      ng-options= "selement as selement for selement in selements" >
                                </select>
                            </div>
                            <div class="col-md-3 form-group">
                              <label for="model-element">Model Element</label>
                              <input ng-model="control.modelelement" type="text" class="form-control" id="model-element" placeholder="" />
                            </div>
                            <div ng-show="viewtype=='edit'" class="col-md-2 form-group">
                              <label for="read-only">Is Read Only</label>
                              <input ng-model="control.isreadonly" type="checkbox" class="form-control" id="read-only" />
                            </div>
                            <div ng-show="control.controltype=='Nested'" class="col-md-2 form-group">
                              <label>
                                  <input type="checkbox" ng-model="control.isarray" class="form-control" >Is Array</input>
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <script type="text/ng-template" id="copyControls.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Select View</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="view-name">View Name</label>
                            <select id="view-name" class="form-control"
                              ng-model="view"
                              ng-required="true"
                              ng-options="view.viewname for view in views" />
                          </div>
                          <div class="form-group">
                            <label for="section-name">Section Name</label>
                            <select id="section-name" class="form-control"
                              ng-model="section"
                              ng-required="true"
                              ng-options="section.controllername for section in view.sections" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <script type="text/ng-template" id="nestedcontrolContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Nested Control Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-3 form-group">
                              <label for="nested-control-name">Control Name</label>
                              <input ng-model="nestedcontrol.controlname" type="text" class="form-control" id="nested-control-name" placeholder="Name" />
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="nested-control-type">Control Type</label>
                              <select class="form-control" ng-model="nestedcontrol.controltype" id="nested-control-type">
                                <option value="Text">Text</option>
                                <option value="Number">Number</option>
                                <option value="Select">Select</option>
                                <option value="Date">Date</option>
                                <option value="Boolean">Boolean</option>
                                <option value="Footer">Footer</option>
                              </select>
                            </div>
                            <div class="col-md-4 form-group">
                              <label for="nested-control-label">Control Label</label>
                              <input ng-model="nestedcontrol.controllabel" type="text" class="form-control" id="nested-control-label" />
                            </div>
                            <div ng-hide="nestedcontrol.controltype=='Select' || nestedcontrol.controltype=='Footer'" class="col-md-3 form-group">
                              <label for="nested-control-example-text">Sample text</label>
                              <input ng-model="nestedcontrol.exampletext" type="text" class="form-control" id="nested-control-example-text" />
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="nested-control-width">Width</label>
                              <input ng-model="nestedcontrol.width" type="number" class="form-control" id="nested-control-width" />
                            </div>
                            <div ng-show="nestedcontrol.controltype=='Select'" class="col-md-3 form-group">
                              <label for="Model">Model</label>
                              <select class="form-control" id="Model"
                                      ng-model="nestedcontrol.modelname"
                                      ng-change="fetchElementslist(nestedcontrol.modelname)"
                                      ng-options= "model.name as model.name for model in models" >
                                </select>
                            </div>
                            <div ng-show="nestedcontrol.controltype=='Select'" class="col-md-3 form-group">
                              <label for="displayelement">Display Element</label>
                              <select class="form-control" id="displayelement"
                                      ng-model="nestedcontrol.displayelement"
                                      ng-options= "selement for selement in selements" >
                                </select>
                            </div>                            
                            <div class="col-md-3 form-group">
                              <label for="nested-model-element">Model Element</label>
                              <input ng-model="nestedcontrol.modelelement" type="text" class="form-control" id="nested-model-element" />
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <div class="table">
                        <table id="tblControl" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Controls
                                <a ng-click="searchControl()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpControl(selectedSection.controls, selectedControlIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownControl(selectedSection.controls, selectedControlIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                                <a ng-click="copycontrols()"><span class="glyphicon glyphicon-import"></span></a>
                                <a ng-csv="exportControls()" filename="controls.csv"><span class="glyphicon glyphicon-export"></span></a>                                
                              </th>
                              <th>Type</th>
                              <th>
                                <a ng-click="newcontrol()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallcontrols()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchControlFlag">
                              <th colspan="4"><input class="form-control" ng-model="c.controlname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedControlIndex}"
                                ng-click="selectControl(control, $index)"
                                ng-repeat="control in selectedSection.controls | filter: c.controlname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ control.controllabel }}</td>
                              <td>{{ control.controltype }}</td>
                              <td>
                                <a ng-click="editcontrol(control, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removecontrol($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div ng-show="selectedControl.controltype=='Nested'" class="table">
                        <table id="tblNestedControl" class="table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>Nested Controls
                                <a ng-click="searchNestedControl()"><span class="glyphicon glyphicon-search"></span></a>
                                <a ng-click="moveUpNestedControl(selectedControl.nestedcontrols, selectedNestedControlIndex)"><span class="glyphicon glyphicon-arrow-up"></span></a>
                                <a ng-click="moveDownNestedControl(selectedControl.nestedcontrols, selectedNestedControlIndex)"><span class="glyphicon glyphicon-arrow-down"></span></a>                                
                              </th>
                              <th>Type</th>
                              <th>
                                <a ng-click="newnestedcontrol()"><span class="glyphicon glyphicon-plus"></span></a>
                                <a ng-click="removeallnestedcontrols()"><span class="glyphicon glyphicon-trash"></span></a>
                              </th>
                            </tr>
                            <tr ng-show="searchNestedControlFlag">
                              <th colspan="4"><input class="form-control" ng-model="nc.controlname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-class="{'selected':$index == selectedNestedControlIndex}"
                                ng-click="selectNestedControl(nestedcontrol, $index)"
                                ng-repeat="nestedcontrol in selectedControl.nestedcontrols | filter: nc.controlname">
                              <td>{{ $index+1 }}</td>
                              <td>{{ nestedcontrol.controllabel }}</td>
                              <td>{{ nestedcontrol.controltype }}</td>
                              <td>
                                <a ng-click="editnestedcontrol(nestedcontrol, $index)"><span class="glyphicon glyphicon-edit"></span></a>
                                <a ng-click="removenestedcontrol($index)"><span class="glyphicon glyphicon-trash"></span></a>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- Control starts -->
                  </div>
                <!-- tab panel body div close-->
                </tab>
                <tab>
                  <tab-heading>
                    Project
                  </tab-heading>
                  <div class="panel-body">
                    <div class="form-group col-md-3 no-print">
                      <input type="text" ng-model='project.name' class="form-control" id="project-name" placeholder="Project Name" required />
                    </div>
                    <span class="print-only" >{{ project.name }}</span>
                    <div class="col-md-3 form-group no-print">
                      <input type="file" on-read-file="loadJSON(contents)" />
                    </div>
                    <div class="col-md-3 form-group no-print">
                      <button class="btn btn-primary" ng-click="saveJSON()" ng-href="{{ url }}" >Export</button>
                      <button class="btn btn-primary" ng-click="resetJSON()" ><span class="glyphicon glyphicon-trash"></span></button>
                    </div>
                    <div class="col-md-12">
                      <button class="btn btn-primary" ng-click="listModules()" >List</button>
                      <div ng-repeat="module in moduleList">
                        <span>{{module}}</span>
                      </div>
                    </div>
                    <pre class="col-md-12">{{ project | json}}</pre>
                  </div>
                </tab>
                <tab>
                  <tab-heading>
                    About
                  </tab-heading>
                  <div class="container-fluid">
                    <div>
                      <div class="jumbotron">
                        <h2>Welcome {{time | date}}!</h2>
                        <p class="lead">
                          <img src="images/seeki.png" alt="seeki"><br>
                          Best place to start developing your applications.
                        </p>
                        <p><a class="btn btn-lg btn-success" ng-href="#/">Start now <span class="glyphicon glyphicon-ok"></span></a></p>
                      </div>
                      <ul ng-repeat="author in authors">
                        <li>{{author}}</li>
                      </ul>
                    </div>
                  </div>
                </tab>
              </tabset>
            </div>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>