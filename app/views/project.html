<div class="container-fluid">
  <div ng-controller="ProjectCtrl">
    <form>
      <fieldset>
        <div class="row"> 
          <div class="col-md-12">
            <div class="tabs-container">
              <tabset>
                <tab>
                  <tab-heading>
                    Models
                  </tab-heading>
                  <div class="panel-body">
                    
                    <div class="col-md-4">

                      <script type="text/ng-template" id="modelContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Model Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <input ng-model="model.name" type="text" class="form-control"  id="model-name" placeholder="Contact" />
                          </div>
              
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>

                      <div class="table">
                        <table id="tblModel" class="table table-hover">
                          <thead>
                            <tr>
                              <th>Model  <a ng-click="searchModel()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th></th>
                              <th><a ng-click="newmodel()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallmodels()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchModelValue">
                              <th colspan="4"><input class="form-control" ng-model="q.name" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-click="selectModel(model, $index)" ng-repeat="model in project.models | filter: q.name">
                              <td>{{ model.name }}</td>
                              <td><span class="badge">{{ model.elements.length }}</span></td>
                              <td><a ng-click="openmodel(model, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="deletemodel($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      
                    </div>

                    <div class="col-md-8">
                      <!-- Single button -->
                        <!-- 
                        <div class="btn-group">
                          <button type="button" class="btn btn-primary">Action</button>
                          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                          </button>
                          <ul class="dropdown-menu">
                            <li><a ng-click="newelement()">Add Element</a></li>
                            <li><a ng-click="removeelement()">Remove Element</a></li>
                            <li><a ng-click="removeallelements()">Remove all</a></li>
                          </ul>
                        </div> -->

                      <script type="text/ng-template" id="elementContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Element Details</h3>
                        </div>
                        <div class="modal-body">

                            <div class="form-group">
                              <label for="element-name">Element Name</label>
                              <input ng-model="element.elementname" type="text" class="form-control" id="element-name" placeholder="Name" />
                            </div>
                            <div class="form-group">
                              <label for="element-type">Element Type</label>
                              <!-- <input ng-model="element.elementtype" type="text" class="form-control" id="element-type" placeholder="String" /> -->
                              <select class="form-control" ng-model="element.elementtype">
                                <option value="String">String</option>
                                <option value="Number">Number</option>
                                <option value="Date">Date</option>
                                <option value="Schema.Types.ObjectId">Schema.Object</option>
                              </select>
                            </div>
                            <div ng-show="element.elementtype=='Schema.Types.ObjectId'" class="form-group">
                              <label for="schema-object-ref">Schema Object Ref</label>
                              <select class="form-control" id="schema-object-ref" ng-model="element.schemaobjref" 
                              ng-options= "model.name as model.name for model in element.models | filter:'!{{ element.modelname }}':true" />
                            </div>                            
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>            
                      <div class="table-responsive">
                        <table id="tblElement" class="table table-hover">
                          <thead>
                            <tr>
                              <th>Element Name <a ng-click="searchElement()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th>Type</th>
                              <th><a ng-click="newelement()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallelements()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchElementValue">
                              <th colspan="4"><input class="form-control" ng-model="e.elementname" /></th>
                            </tr>                            
                          </thead>
                          <tbody>
                            <tr ng-repeat="element in selectedModel.elements | filter: e.elementname">
                              <td>{{ element.elementname }}</td>
                              <td>{{ element.elementtype }}</td>
                              <td><a ng-click="editelement(element, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removeelement($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                <!-- tab panel body div close-->
                </tab>

                <tab>
                  <tab-heading>
                    Menus
                  </tab-heading>
                  <div class="panel-body">
                  
                    <!-- menu starts here -->
                    <div class="col-md-5">
                      <script type="text/ng-template" id="menuContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Menu Details</h3>
                        </div>
                        <div class="modal-body">

                          <div class="form-group">
                            <label for="menu-name">Menu Name</label>
                            <input ng-model="menu.menuname" type="text" class="form-control" id="menu-name" placeholder="" />
                          </div>
                        
                          <div class="form-group">
                            <label for="menu-label">Menu Label</label>
                            <input ng-model="menu.menulabel" type="text" class="form-control" id="menu-label" placeholder="" />
                          </div>
                          
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                     
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Menu  <a ng-click="searchMenu()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th></th>
                              <th><a ng-click="newmenu()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallmenus()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchMenuValue">
                              <th colspan="4"><input class="form-control" ng-model="m.menuname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-click="selectmenu($index)" ng-repeat="menu in project.menus | filter: m.menuname">
                              <td>{{ menu.menulabel }}</td>
                              <td><span class="badge">{{ menu.submenus.length }}</span></td>
                              <td><a ng-click="editmenu(menu, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removemenu($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    
                    <!-- sub-menu starts here -->
                    <div class="col-md-7">
                      <span>{{ selectedmenu.name }}</span>
                      
                      <script type="text/ng-template" id="submenuContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Sub-menu Details</h3>
                        </div>
                        <div class="modal-body">

                            <div class="form-group">
                              <label for="main-menu-name">Main Menu Name</label>
                              <input ng-disabled="true" ng-model="submenu.mainmenuname" type="text" class="form-control" id="main-menu-name" placeholder="" />
                            </div>
                            <div class="form-group">
                              <label for="sub-menu-name">Sub Menu Name</label>
                              <input ng-model="submenu.submenuname" type="text" class="form-control" id="sub-menu-name" placeholder="" />
                            </div>                            
                            <div class="form-group">
                              <label for="sub-menu-label">Sub Menu Label</label>
                              <input ng-model="submenu.submenulabel" type="text" class="form-control" id="sub-menu-label" placeholder="" />
                            </div>
                            
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>

                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Sub Menu Name  <a ng-click="searchSubMenu()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th>Sub Menu Label</th>
                              <th><a ng-click="newsubmenu()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallsubmenus()"><span class="glyphicon glyphicon-remove"></a></th>
                            </tr>
                            <tr ng-show="searchSubMenuValue">
                              <th colspan="4"><input class="form-control" ng-model="sm.submenuname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="submenu in selectedmenu.submenus | filter: sm.submenuname">
                              <td>{{ submenu.submenuname }}</td>
                              <td>{{ submenu.submenulabel }}</td>
                              <td><a ng-click="editsubmenu(submenu, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removesubmenu($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>                    
                    
                  </div>
                  
                </tab>
                
                <tab>
                  <tab-heading>
                    Views
                  </tab-heading>
                  <div class="panel-body">
                    <!-- view starts here -->
                    <div class="col-md-4">
                      <!-- view popup starts here -->
                      <script type="text/ng-template" id="viewContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">View Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="view-name">View Name</label>
                            <input ng-model="view.viewname" type="text" class="form-control" id="view-name" placeholder="" />
                          </div>                        
                          <div class="form-group">
                            <label for="view-type">View Type</label>
                            <select class="form-control" ng-model="view.viewtype" id="view-type">
                              <option value="create">Create</option>
                              <option value="edit">Edit</option>
                              <option value="list">List</option>
                              <option value="view">View</option>
                            </select>
                          </div>                            
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <select id="model-name" class="form-control" 
                              ng-model="view.modelname" 
                              ng-required="true" 
                              ng-options="model.name as model.name for model in view.models" />
                          </div>
                          
                          <div ng-show="view.viewtype=='list'" class="form-group">
                            <label for="menu-name">Main Menu Name</label>
                            <select id="menu-name" class="form-control" 
                              ng-model="view.menuname" 
                              ng-required="true" 
                              ng-options="menu.menuname as menu.menuname for menu in view.menus">
                              <option value="">No Menu</option>
                            </select>
                          </div>                          
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <!-- view popup ends here -->
                      
                      <!-- view table starts here -->
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>View  <a ng-click="searchView()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th></th>
                              <th><a ng-click="newview()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="deleteallviews()"><span class="glyphicon glyphicon-trash"></span></a></th>
                            </tr>
                            <tr ng-show="searchViewValue">
                              <th colspan="4"><input class="form-control" ng-model="v.viewname" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-click="selectView(view, $index)" ng-repeat="view in project.views | filter: v.viewname">
                              <td>{{ view.viewname }}</td>
                              <td><span class="badge">{{ view.controls.length }}</span></td>
                              <td><a ng-click="openview(view, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="deleteview($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- view ends here -->
                    
                    <!-- Control starts -->
                    <div class="col-md-8">
                      <script type="text/ng-template" id="controlContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Control Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-4 form-group">
                              <label for="control-name">Control Name</label>
                              <input ng-model="control.controlname" type="text" class="form-control" id="control-name" placeholder="Name" />
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="control-type">Control Type</label>
                              <select class="form-control" ng-model="control.controltype">
                                <option value="Text">Text</option>
                                <option value="Number">Number</option>
                                <option value="Lookup">Lookup</option>
                                <option value="Date">Date</option>
                              </select>
                            </div>
                            <div class="col-md-2 form-group">
                              <label for="control-width">Width</label>
                              <input ng-model="control.width" type="number" class="form-control" id="control-width" placeholder="2" />
                            </div>
                            <div class="col-md-4 form-group">
                              <label for="model-element">Model Element</label>
                              <input ng-model="control.modelelement" type="text" class="form-control" id="model-element" placeholder="" />
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-3 form-group">
                              <label for="control-label">Control Label</label>
                              <input ng-model="control.controllabel" type="text" class="form-control" id="control-label" placeholder="Display Name" />
                            </div>
                            <div class="col-md-3 form-group">
                              <label for="example-text">Sample text</label>
                              <input ng-model="control.exampletext" type="text" class="form-control" id="example-text" placeholder="" />
                            </div>
                            <div ng-show="control.controltype=='Lookup'" class="col-md-6 form-group">
                              <label for="options">options</label>
                              <input ng-model="control.options" type="text" class="form-control" id="options" 
                              placeholder="element.id as element.label for element in collection" />
                            </div>
                 
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      
                      <script type="text/ng-template" id="copyControls.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Select View</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="view-name">View Name</label>
                            <select id="view-name" class="form-control" 
                              ng-model="view" 
                              ng-required="true" 
                              ng-options="view.viewname for view in views" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Control Name  <a ng-click="searchControl()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th>Label <a ng-click="copycontrols()"><span class="glyphicon glyphicon-import"></span></a></th>
                              <th><a ng-click="newcontrol()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallcontrols()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchControlValue">
                              <th colspan="5"><input class="form-control" ng-model="c.controlname" /></th>
                            </tr>                            
                          </thead>
                          <tbody>
                            <tr ng-repeat="control in selectedView.controls | filter: c.controlname">
                              <td>{{ control.controlname }}</td>
                              <td>{{ control.controllabel }}</td>
                              <td><a ng-click="editcontrol(control, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removecontrol($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- Control starts -->
                    
                  </div>
                <!-- tab panel body div close-->

                </tab>
                <tab>
                  <tab-heading>
                    Controllers
                  </tab-heading>
                  <div class="panel-body">
                    <!-- controller starts here -->
                    <div class="col-md-4">
                      <!-- controller popup starts here -->
                      <script type="text/ng-template" id="controllerContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Controller Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="controller-name">Controller Name</label>
                            <input ng-model="controller.controllername" type="text" class="form-control" id="controller-name" placeholder="" />
                          </div>                        
                          <div class="form-group">
                            <label for="model-name">Model Name</label>
                            <select id="model-name" class="form-control" 
                              ng-model="controller.modelname" 
                              ng-required="true" 
                              ng-options="model.name as model.name for model in controller.models" />
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      <!-- controller popup ends here -->
                      
                      <!-- controller table starts here -->
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Controller  <a ng-click="searchController()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th></th>
                              <th><a ng-click="newcontroller()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="deleteallcontrollers()"><span class="glyphicon glyphicon-trash"></span></a></th>
                            </tr>
                            <tr ng-show="searchControllerValue">
                              <th colspan="4"><input class="form-control" ng-model="ct.controllername" /></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-click="selectController(controller, $index)" ng-repeat="controller in project.controllers | filter: ct.controllername">
                              <td>{{ controller.controllername }}</td>
                              <td><span class="badge">{{ controller.methods.length }}</span></td>
                              <td><a ng-click="opencontroller(controller, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="deletecontroller($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!-- controller table ends here -->                      
                    </div>
                    <!-- service starts -->
                    <div class="col-md-3">
                      <script type="text/ng-template" id="serviceContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Service Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="service-name">Service Name</label>
                            <select id="service-name" class="form-control" 
                              ng-model="service.servicename" 
                              ng-required="true" 
                              ng-options="model.name as model.name for model in service.models | filter:'!{{ service.modelname }}':true" />
                            
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Service Name  <a ng-click="searchServices()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th><a ng-click="newservice()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removeallservices()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchServicesflag">
                              <th colspan="3"><input class="form-control" ng-model="sc.servicename" /></th>
                            </tr>                            
                          </thead>
                          <tbody>
                            <tr ng-repeat="service in selectedController.services | filter: sc.servicename">
                              <td>{{ service.servicename }}</td>
                              <td><a ng-click="editservice(service, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removeservice($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- service ends -->
                    
                    <!-- lookup starts -->
                    <div class="col-md-5">
                      <script type="text/ng-template" id="lookupContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title">Lookup Details</h3>
                        </div>
                        <div class="modal-body">
                          <div class="row">
                            <div class="col-md-3 form-group">
                              <label for="lookup-name">Lookup Name</label>
                              <input ng-model="lookup.lookupname" type="text" class="form-control" id="lookup-name" placeholder="" />
                            </div>
                            <div class="col-md-9 form-group">
                              <label for="lookup-expression">Expression</label>
                              <input ng-model="lookup.expression" type="text" class="form-control" id="lookup-expression" placeholder="" />
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" ng-click="ok()">OK</button>
                            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
                        </div>
                      </script>
                      
                      <div class="table">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Lookup Name  <a ng-click="searchLookup()"><span class="glyphicon glyphicon-search"></span></a></th>
                              <th>Expression</th>
                              <th><a ng-click="newlookup()"><span class="glyphicon glyphicon-plus"></span></a></th>
                              <th><a ng-click="removealllookups()"><span class="glyphicon glyphicon-remove"></span></a></th>
                            </tr>
                            <tr ng-show="searchLookupValue">
                              <th colspan="4"><input class="form-control" ng-model="l.lookupname" /></th>
                            </tr>                            
                          </thead>
                          <tbody>
                            <tr ng-repeat="lookup in selectedController.lookups | filter: l.lookupname">
                              <td>{{ lookup.lookupname }}</td>
                              <td>{{ lookup.expression }}</td>
                              <td><a ng-click="editlookup(lookup, $index)"><span class="glyphicon glyphicon-edit"></span></a></td>
                              <td><a ng-click="removelookup($index)"><span class="glyphicon glyphicon-trash"></span></a></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- lookup ends -->                    
                    
                  </div>
                  <!-- tab panel body div close-->
                </tab>
                <tab>
                  <tab-heading>
                    Project
                  </tab-heading>
                  <div class="panel-body">
                    <div class="form-group col-md-3 no-print">
                      <input type="text" ng-model='project.name' class="form-control" id="project-name" placeholder="Project Name" required />
                    </div> 
                    <span class="print-only">{{ project.name }}</span>
                    <div class="col-md-3 form-group no-print">
                      <input type="file" on-read-file="displayFileContents(contents)" />
                    </div>
                    <div class="col-md-3 form-group no-print">
                      <button class="btn btn-primary" ng-click="saveJSON()" ng-href="{{ url }}">Export</button>
                    </div>
                    <pre class="col-md-12">{{ project | json}}</pre>
                  </div>
                </tab>
              </tabset>
            </div>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</div>